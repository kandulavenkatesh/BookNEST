doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title Book Details - #{book.title}
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css", integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN", crossorigin="anonymous")
    style.
      :root {
        --ink: #0f172a;
        --slate: #334155;
        --teal: #0ea5e9;
      }
      body {
        background: linear-gradient(120deg, #f8fafc 0%, #eef2ff 50%, #f8fafc 100%);
        color: var(--slate);
      }
      .card-soft {
        border: 1px solid #e2e8f0;
        border-radius: 18px;
        box-shadow: 0 12px 32px rgba(15,23,42,0.08);
      }
      .label-pill {
        border-radius: 999px;
        padding: 6px 12px;
        background: rgba(14,165,233,0.12);
        color: var(--teal);
        font-weight: 600;
      }
  body
    .container.py-4.py-lg-5
      .d-flex.justify-content-between.align-items-center.mb-4
        .d-flex.align-items-center.gap-3
          span.label-pill Details
          h1.h4.fw-bold.mb-0 #{book.title}
        .d-flex.gap-2
          a.btn.btn-outline-secondary.rounded-pill(href="/dashboard") ← Back to dashboard
          a.btn.btn-outline-primary.rounded-pill(href="/") Home

      .row.g-4
        .col-lg-4
          .card.card-soft.p-3
            img.rounded.w-100.mb-3(style="object-fit:cover; height:320px; border:1px solid #e2e8f0;", src=book.cover_image_url || 'https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=400&q=80', alt=`Cover of ${book.title}`)
            .small.text-muted.mb-1 ISBN-13: #{book.isbn_13 || '—'}
            .small.text-muted.mb-1 ISBN-10: #{book.isbn_10 || '—'}
            .small.text-muted Publisher: #{book.publisher_name || '—'}
            .small.text-muted Published on: #{book.publication_date_input || '—'}
            .small.text-muted Language: #{book.language || '—'}
            .small.text-muted Format: #{book.format || '—'}
            .small.text-muted Pages: #{book.page_count || '—'}

        .col-lg-8
          .card.card-soft.p-4
            form
              .row.g-3
                .col-md-8
                  label.form-label(for="title") Title
                  input#title.form-control(type="text", value=book.title, readonly)
                .col-md-4
                  label.form-label(for="subtitle") Subtitle
                  input#subtitle.form-control(type="text", value=book.subtitle || '', readonly)
              .row.g-3.mt-1
                .col-md-6
                  label.form-label(for="author") Author
                  input#author.form-control(type="text", value=book.author_name, readonly)
                .col-md-6
                  label.form-label(for="publisher") Publisher
                  input#publisher.form-control(type="text", value=book.publisher_name || '', readonly)
              .row.g-3.mt-1
                .col-md-6
                  label.form-label(for="isbn13") ISBN-13
                  input#isbn13.form-control(type="text", value=book.isbn_13 || '', readonly)
                .col-md-6
                  label.form-label(for="isbn10") ISBN-10
                  input#isbn10.form-control(type="text", value=book.isbn_10 || '', readonly)
              .row.g-3.mt-1
                .col-md-4
                  label.form-label(for="language") Language
                  input#language.form-control(type="text", value=book.language || '', readonly)
                .col-md-4
                  label.form-label(for="format") Format
                  input#format.form-control(type="text", value=book.format || '', readonly)
                .col-md-4
                  label.form-label(for="page_count") Page count
                  input#page_count.form-control(type="text", value=book.page_count || '', readonly)
              .row.g-3.mt-1
                .col-md-6
                  label.form-label(for="publication_date") Publication date
                  input#publication_date.form-control(type="date", value=book.publication_date_input || '', readonly)
                .col-md-6
                  label.form-label(for="cover_image_url") Cover image URL
                  input#cover_image_url.form-control(type="url", value=book.cover_image_url || '', readonly)
              .mt-3
                label.form-label Categories
                .d-flex.flex-wrap.gap-2
                  if categories && categories.length
                    each cat in categories
                      label.form-check-label.border.rounded-pill.px-3.py-1.bg-light
                        input.form-check-input.me-2(type="checkbox", disabled, checked=!!cat.selected)
                        | #{cat.name}
                  else
                    span.text-muted No categories
              .mt-3
                label.form-label(for="description") Description
                textarea#description.form-control(rows="4", readonly)= book.description || ''
              .mt-3.text-muted.small
                | Created: #{book.created_at || '—'} · Updated: #{book.updated_at || '—'}
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js", integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL", crossorigin="anonymous")
